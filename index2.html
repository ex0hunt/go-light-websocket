<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WebSocket Test</title>
</head>
<body>
    <h2>WebSocket Test</h2>
    <div id="output"></div>

    <script language="javascript" type="text/javascript">
    var wsUri = "ws://localhost:8090/echo";
    var output = document.getElementById("output");
    var limit = 1000;
    var socks = [];
    function init() {
      for (i = 0; i < limit; i++) {
          (function() {
              var websocket = new WebSocket(wsUri);
              websocket.onopen = function(evt) {
                  console.log('onopen', evt);
                  websocket.send('dsifjsdoijfds kfmsdsdfslkd fsdlknmf ldskjvcs lj wlkefljfcoiwejfc io23j982jeoifdwejfdlsjmfoisdjf238jfdewifnjsldfosiejfowiejfowiejfowiej');
              };
              websocket.onclose = function(evt) {
                  console.log('onclose', evt);
              };
              websocket.onmessage = function(evt) {
                  console.log('onmessage', evt);
              };
              websocket.onerror = function(evt) {
                  console.log('onerror', evt);
              };
              socks.push(websocket);
          })();
      }
    }

    window.addEventListener("load", init, false);
    </script>
</body>
</html>
